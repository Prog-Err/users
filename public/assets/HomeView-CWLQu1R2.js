import{a as b}from"./axios-api-DSUBSmZb.js";import{d as v,u as k,r as h,o as w,c as s,a as p,b as x,w as m,e as d,f as e,F as g,g as S,h as V,i as t,j as y,t as i,k as B,p as C,l as I,_ as N}from"./index-DOcY17eO.js";const c=a=>(C("data-v-c15604be"),a=a(),I(),a),j=c(()=>e("h1",{class:"mb-4"},"Пользователи",-1)),A={key:0,class:"d-flex justify-content-end mb-3"},F={class:"table-responsive"},L={class:"table table-striped"},E=c(()=>e("thead",null,[e("tr",null,[e("th",{style:{width:"30%"}},"Имя пользователя"),e("th",{style:{width:"30%"}},"Email"),e("th",{style:{width:"30%"}},"Роли"),e("th",{style:{width:"10%"}})])],-1)),H={key:0},R=c(()=>e("td",{colspan:"4",class:"text-center"},[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Загрузка...")])],-1)),D=[R],M={key:2},T=c(()=>e("td",{colspan:"4",class:"text-center"},"Нет пользователей ",-1)),U=[T],$=v({__name:"HomeView",setup(a){const u=k(),r=h([]),n=h(!1),f=async()=>{n.value=!0;try{const l=await b.get("/users");r.value=l.data}catch(l){console.error("Failed to fetch users:",l)}finally{n.value=!1}};return w(()=>{f()}),(l,q)=>{const _=V("RouterLink");return t(),s("div",null,[j,p(u).isAdmin?(t(),s("div",A,[x(_,{to:"/user/new",class:"btn btn-primary"},{default:m(()=>[y("Добавить пользователя")]),_:1})])):d("",!0),e("div",F,[e("table",L,[E,e("tbody",null,[n.value?(t(),s("tr",H,D)):(t(!0),s(g,{key:1},S(r.value,o=>(t(),s("tr",{key:o.id},[e("td",null,i(o.username),1),e("td",null,i(o.email),1),e("td",null,i(o.roles.join(", ")),1),e("td",null,[p(u).isAdmin?(t(),B(_,{key:0,to:`/user/${o.id}`,class:"btn btn-sm btn-secondary"},{default:m(()=>[y("Редактировать")]),_:2},1032,["to"])):d("",!0)])]))),128)),!n.value&&r.value.length===0?(t(),s("tr",M,U)):d("",!0)])])])])}}}),J=N($,[["__scopeId","data-v-c15604be"]]);export{J as default};
