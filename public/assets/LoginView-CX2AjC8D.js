import{d as k,r as c,u as x,c as t,f as a,m as v,v as p,n as _,a as o,e as n,t as L,b as V,w as $,q as C,i as r,j as q}from"./index-DOcY17eO.js";import{u as B,L as N,r as h,m as f}from"./LoadingButton-s7Exbs-U.js";const S={class:"d-flex justify-content-center"},j={class:"card p-4",style:{width:"500px"}},D=a("h1",{class:"text-left mb-4"},"Авторизация",-1),E={class:"mb-3"},T=a("label",{for:"username",class:"form-label"},"Пользователь",-1),U={key:0,class:"invalid-feedback"},z={key:0},A={key:1},H={class:"mb-3"},M=a("label",{for:"password",class:"form-label"},"Пароль",-1),R={key:0,class:"invalid-feedback"},F={key:0},G={key:1},I={key:1,class:"text-danger mt-2"},P=k({__name:"LoginView",setup(J){const e=c({username:"",password:""}),w={username:{required:h,minLength:f(3)},password:{required:h,minLength:f(4)}},s=B(w,e),g=x(),y=C(),i=c(""),u=c(!1),b=async()=>{if(s.value.$touch(),!s.value.$invalid){i.value="",u.value=!0;try{await g.login(e.value.username,e.value.password)&&y.push({name:"Home"})}catch{i.value="Неверное имя пользователя или пароль"}finally{u.value=!1}}};return(m,l)=>(r(),t("div",S,[a("div",j,[D,a("div",null,[a("div",E,[T,v(a("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=d=>e.value.username=d),class:_([{"is-invalid":o(s).username.$error},"form-control"]),placeholder:"Введите ваше имя пользователя"},null,2),[[p,e.value.username]]),o(s).username.$error?(r(),t("div",U,[o(s).username.required&&e.value.username.length==0?(r(),t("div",z,"Имя пользователя обязательно.")):n("",!0),o(s).username.minLength&&e.value.username.length<3?(r(),t("div",A,"Имя пользователя должно содержать не менее 3 символов.")):n("",!0)])):n("",!0)]),a("div",H,[M,v(a("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=d=>e.value.password=d),class:_([{"is-invalid":o(s).password.$error},"form-control"]),placeholder:"Введите свой пароль"},null,2),[[p,e.value.password]]),o(s).password.$error?(r(),t("div",R,[o(s).password.required&&e.value.password.length==0?(r(),t("div",F,"Пароль обязателен.")):n("",!0),o(s).password.minLength&&e.value.password.length<4?(r(),t("div",G,"Пароль должен содержать не менее 4 символов. ")):n("",!0)])):n("",!0),i.value?(r(),t("div",I,L(i.value),1)):n("",!0)]),V(N,{loading:u.value,"button-class":"btn-primary w-100","loading-text":"Вход...",onClick:l[2]||(l[2]=d=>b())},{default:$(()=>[q(" Вход ")]),_:1},8,["loading"])])])]))}});export{P as default};
